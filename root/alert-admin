#!/bin/sh

# Скрипт уведомления администратора БД "Инфоклиника"  v.0.8.23112014
#
# Реально используемая в клинике версия была другой.  Из соображений
# безопасности  заменена на простую обёртку, запускающую  Mail Agent.
# На самом деле  этот скрипт может уведомлять различными путями:  по
# e-mail, по SMS, слать на пейджер или "вообще ничего не делать". Но
# имейте ввиду: в закрытом контуре обработка ПД обычно подразумевает
# отсутсвие Интернета.
#

# Данная программа  является  свободным программным обеспечением.
# Вы можете  распространять  и/или  модифицировать  её  согласно
# условиям Стандартной Общественной Лицензии GNU, опубликованной
# Фондом Свободного Программного Обеспечения,  версии 3 или,  по
# Вашему желанию,  любой  более поздней  версии.  Эта  программа
# распространяется в надежде,  что она будет полезной,  но  БЕЗО
# ВСЯКИХ  ГАРАНТИЙ,  в  том  числе,   подразумеваемых   гарантий
# ТОВАРНОГО СОСТОЯНИЯ ПРИ ПРОДАЖЕ  и  ГОДНОСТИ ДЛЯ ОПРЕДЕЛЁННОГО
# ПРИМЕНЕНИЯ. Смотрите Стандартную Общественную Лицензию GNU для
# получения  дополнительной  информации.    Копия  оригинального
# текста  Стандартной  Общественной  Лицензии  GNU  поставляется
# вместе с этой программой в файле LICENSE.
#
# Copyright (C) 2014 Leonid Krivoshein <klark.devel@gmail.com>
#

# E-mail администратора
ADDR="admin@example.com"

if [ -n "$1" ] ; then
    SUBJECT="$1"
else
    SUBJECT=`/bin/hostname 2>/dev/null`" needs your immediate intervention"
fi

/usr/bin/mail -s "$SUBJECT" \
	-a 'MIME-Version: 1.0' \
	-a 'Content-Transfer-Encoding: 8bit' \
	-a 'Content-Type: text/plain; charset=UTF-8' $ADDR
exit $?
