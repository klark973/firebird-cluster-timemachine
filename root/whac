#!/bin/sh

# Скрипт вывода основной информации о состоянии узла кластера.
# В данном случае это просто пример того, что здесь может быть.
#

# Данная программа  является  свободным программным обеспечением.
# Вы можете  распространять  и/или  модифицировать  её  согласно
# условиям Стандартной Общественной Лицензии GNU, опубликованной
# Фондом Свободного Программного Обеспечения,  версии 3 или,  по
# Вашему желанию,  любой  более поздней  версии.  Эта  программа
# распространяется в надежде,  что она будет полезной,  но  БЕЗО
# ВСЯКИХ  ГАРАНТИЙ,  в  том  числе,   подразумеваемых   гарантий
# ТОВАРНОГО СОСТОЯНИЯ ПРИ ПРОДАЖЕ  и  ГОДНОСТИ ДЛЯ ОПРЕДЕЛЁННОГО
# ПРИМЕНЕНИЯ. Смотрите Стандартную Общественную Лицензию GNU для
# получения  дополнительной  информации.    Копия  оригинального
# текста  Стандартной  Общественной  Лицензии  GNU  поставляется
# вместе с этой программой в файле LICENSE.
#
# Copyright (C) 2014 Leonid Krivoshein <klark.devel@gmail.com>
#

/sbin/ifconfig bond0:ucarp 2>/dev/null
if [ -r /proc/drbd ]; then
    cat /proc/drbd; echo ''
fi
/usr/sbin/hpacucli ctrl slot=0 pd all show status \
    2>&1 | /bin/egrep '^   physicaldrive '; echo ''
/bin/df -h | /bin/egrep -v '^(rootfs|tmpfs|udev) '

